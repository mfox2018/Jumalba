<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
# -*- coding: utf-8 -*-
# please visit Freeworld.Media es mi canal de Youtube
import xbmc,xbmcgui,xbmcplugin,sys
icons = ""
icon = xbmc.translatePath("special://home/addons/plugin.video.iptv-/icon.png")
plugin_handle = int(sys.argv[1])
mode = sys.argv[2]
	
def add_video_item(url, infolabels, img=''):
    url = 'plugin://plugin.video.iptv/?playiptv=' + url + '***' + infolabels['title'] + '***' + img
    listitem = xbmcgui.ListItem(infolabels['title'], iconImage=img, thumbnailImage=img)
    listitem.setInfo('video', infolabels)
    listitem.setProperty('IsPlayable', 'false')
    xbmcplugin.addDirectoryItem(plugin_handle, url, listitem)
    return
	
def iptvxtra_play():
    xbmcPlayer = xbmc.Player()
    idx = mode.replace("?playiptv=", "").replace("###", "|").replace("#x#", "?").replace("#h#", "http://").split('***')
    xbmc.executebuiltin('XBMC.Notification('+idx[1]+' , IPTV ,5000,'+idx[2]+')')
    listitem = xbmcgui.ListItem( idx[1], iconImage=idx[2], thumbnailImage=idx[2])
    playlist = xbmc.PlayList( xbmc.PLAYLIST_VIDEO )
    playlist.clear()
    playlist.add(idx[0], listitem )
    xbmcPlayer.play(playlist,None,False)
    sys.exit(0)

def main():
    add_video_item('http://ragnaroktv.com/hls/izzi/4/6/XHGC.m3u8'				,{ 'title': 'CHANNEL'}, icons + 'https://s4.aconvert.com/convert/p3r68-cdx67/27nqj-a1xv5.jpg')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')
    add_video_item(''				,{ 'title': ''}, icons + '')


    # add_video_item(''				,{ 'title': ''}, icons + '')
    # add_video_item(''				,{ 'title': ''}, icons + '')
    # add_video_item(''				,{ 'title': ''}, icons + '')
    # add_video_item(''				,{ 'title': ''}, icons + '')
    # add_video_item(''				,{ 'title': ''}, icons + '')

    xbmcplugin.endOfDirectory(plugin_handle)

if 'playiptv' in mode:
    iptvxtra_play()
else:
    main()

